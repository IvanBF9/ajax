<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Renforcement JS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <br>
    <br>
    <div class="col-6 mx-auto">
        <div class="form-group">
            <form>
                <input type="text" class="form-control" placeholder="Email"><br>
                <input type="text" class="form-control" placeholder="Mot de Passe"><br>
                <button class="btn btn-primary">Connexion</button>
            </form>
            <br>
            <h4><span class="badge badge-primary mx-auto" id="ip"></span></h4>
        </div>
    </div>
    <!-- CONSIGNE : Avec l'aide de jQuery, vous devrez :
    
        1. A l'aide d'une API de Géolocalisation, vous affichez dans un paragraphe du formulaire 
            l'adresse IP ainsi que la Ville et/ou Code Postal de l'utilisateur connecté.
        
        // -- https://ipapi.co
        // indications : $.ajax() ou $.getJSON()
     
    -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(function(){
    $api = $.getJSON("https://ipapi.co/json/", function(data){
        console.log($api);

    $("#ip").append(`IP : ` + data.ip + `<br>` + `City : ` + data.city + `<br>` + `Région : ` + data.region);
    });
    });
    //*************************CORECTION************************//
    $(function() {
            // 2 façons possible de procéder :

            // 1. Une requète AJAX simple :
            $.ajax('https://ipapi.co/json/').done(function(data) {
                console.log( data );
                console.log( data.ip );
                console.log( data.city );
            });

            // 2. GetJSON, encore plus simple !
            $.getJSON('https://ipapi.co/json/', function(data) {
                // console.log( data );
                $(`
                    <p>
                        Votre IP est surveillée : ${data.ip}
                        <br> ${data.city} - ${data.region}
                    </p>
                `)
                .css({'background':'yellow', 'color':'red'})
                .appendTo( $('form') );
            });

        });


    </script>

</body>
</html>
